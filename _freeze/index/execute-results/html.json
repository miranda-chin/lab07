{
  "hash": "f5fe37d6e402ba8313f7ab54a3552cdf",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Lab 7 Proposals\nauthors:\n  - name: Miranda Chin\n    affiliation: CSU\n    roles: writing\n    corresponding: true\n  - name: Kayla Sutton\n    affiliation: CSU\n    roles: writing\n    corresponding: false\nbibliography: references.bib\ncsl: apa-5th-edition.csl\neditor: \n  markdown: \n    wrap: sentence\n---\n\n\n\n\n\n## Ozone pollution associated with Fort Collins policies\n\n*Introduction:*\n\nAir quality is an increasingly urgent public health concern across many urban centers in the United States, and Fort Collins, Colorado, is no exception.\nDespite its reputation for clean air and progressive environmental values, Fort Collins has consistently ranked among the worst cities in the nation for ground-level ozone pollution.\nAccording to recent data, the region frequently exceeds the ozone limits set by the Environmental Protection Agency (EPA), placing residents—especially those with respiratory conditions—at heightened risk.\nHigh levels of ozone have been directly linked to increased rates of asthma, chronic bronchitis, and other respiratory diseases, which can result in more frequent emergency room visits and reduced overall quality of life [@chang2006ozone].\nGround-level ozone, unlike the protective stratospheric ozone layer, is a harmful air pollutant formed through complex photo-chemical reactions.\nSpecifically, it is produced when volatile organic compounds (VOCs) and nitrogen oxides (NOx) react in the presence of sunlight and heat.\nOf these precursors, NOx is primarily emitted from the combustion of fossil fuels, making vehicle emissions a dominant source in urban environments [@lowi1990method].\n\nWith the growing population and vehicular traffic in Fort Collins, the city has faced increasing pressure to manage its emissions and reduce ozone pollution levels.\nRecognizing the health and environmental risks posed by ozone pollution, Fort Collins has implemented a series of policy initiatives over the past two decades aimed at curbing vehicle emissions and promoting cleaner transportation alternatives.\nThese include infrastructure investments to support walking and biking, expanded public transportation networks, and efforts to limit single-occupancy vehicle travel.\nAdditionally, municipal plans have emphasized land use strategies that encourage compact, transit-oriented development and discourage sprawl.\nWhile these policies demonstrate a strong commitment to environmental stewardship, the extent to which they have actually succeeded in reducing ozone pollution remains unclear.\nUnderstanding the effectiveness of these policies is not only critical for guiding future environmental and public health strategies in Fort Collins, but also provides a valuable case study for other cities grappling with similar challenges.\n\nAs climate change continues to exacerbate heat levels and increase the frequency of high-ozone days, evaluating the success of local mitigation efforts is more important than ever [@chang2006ozone].\nThis research seeks to address this knowledge gap by systematically examining ozone trends in relation to the implementation of transportation and emissions-related policies in Fort Collins.\nThe objective of this study is to assess the impact of vehicle emission-reduction policies on ambient ozone levels in Fort Collins.\nSpecifically, we aim to identify which policy measures have been most successful in lowering ozone concentrations and whether their implementation corresponds to observable improvements in air quality over time.\nBy evaluating the relative effectiveness of different interventions, we hope to inform both local and regional decision-makers on best practices for managing urban ozone pollution.\n\nTo achieve this, we propose a mixed-methods approach that combines quantitative air quality data analysis with a comprehensive policy review.\nAmbient ozone concentration data will be obtained from established air quality monitoring stations in and around Fort Collins, covering a multi-year time frame that spans periods before and after the enactment of specific policy initiatives.\nUsing time-series analysis, we will identify significant changes or trends in ozone levels and assess whether these coincide with policy milestones.\nTo control for meteorological influences—such as seasonal temperature fluctuations and wind patterns—we will incorporate relevant environmental variables into our models.\nIn addition to ground-based data and ozone tracking, we will also be relating those findings to policy action and determining if there are connections between the two.\nTo strengthen the analytical framework, we will conduct a comparative assessment with the city of Greely, as the city has not implemented any policies to address ozone.\nThis will help contextualize Fort Collins’ progress and provide a more nuanced understanding of policy effectiveness in diverse regulatory environments.\nThe policy component of the study will involve a detailed review of municipal documents, transportation plans, city council records, and enforcement reports to compile a timeline of enacted policies.\nThese will be categorized by type—such as infrastructure investments, regulatory changes, or incentive programs—and evaluated for their scope, implementation rigor, and intended outcomes.\nParticular attention will be given to measures that directly target vehicle emissions, such as fuel efficiency standards, carpool incentives, or investments in zero-emission public transportation.\nTo rigorously assess the causal relationship between policy implementation and changes in ozone levels, we will employ statistical techniques such as difference-in-differences (DiD) modeling.\nThis approach allows us to compare trends in Fort Collins before and after policy enactments against a control group that did not experience similar interventions.\nBy isolating the effects of policy from broader environmental or economic changes, we aim to draw more robust conclusions about the actual impact of specific measures.\n\nThe expected outcome of this research is the identification of the most effective policy or set of policies in reducing vehicle emissions and, consequently, ozone pollution in Fort Collins.\nWe hypothesize that policies which directly address vehicle usage—such as enhanced public transit options or urban design that reduces car dependency—will correlate with the most significant reductions in ozone concentrations.\nUltimately, these findings can guide future environmental policy not only within Fort Collins but also serve as a blueprint for other municipalities seeking to combat ground-level ozone and protect public health in the face of growing environmental challenges.\n\n*Data/Materials:*\n\nSome of the data we will be working with includes pre-generated data files from the Environmental Protection Agency focusing on ozone levels.\nWe will need to narrow it down substantially in order to only get data for our area of interest, as well as focus on only the parameters which will be relevant to our project, but will most likely not need to clean the data as the majority of it is already well-ordered.\nAdditionally we will be using legislative documents in order to better understand the policies we will be analyzing and how they did or did not impact ozone levels in Fort Collins.\n\nData visualization:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nlibrary(ggplot2)\nlibrary(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n\nAttaching package: 'dplyr'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nozone_data <- readr::read_csv(\"/Users/mirandachin/ESS330/lab07/data/daily_44201_2003.csv\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 351848 Columns: 29\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (17): State Code, County Code, Site Num, Datum, Parameter Name, Sample ...\ndbl  (10): Parameter Code, POC, Latitude, Longitude, Observation Count, Obse...\ndate  (2): Date Local, Date of Last Change\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nfilter_data <- ozone_data %>% \n  filter(`County Name` == \"Larimer\")\n\nggplot(data = filter_data, aes(x = `Site Num`, y = `AQI`)) +\n  geom_point() +\n  labs(title = \"AQI in Larimer Sites\", x = \"Site Number\", y = \"AQI\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nggplot(data = filter_data, aes(x = `Date Local`, y = AQI)) +\n  geom_col() +\n  labs(title = \"Larimer AQI Over Time\", x = \"Date\", y = \"AQI\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n\n\n\n*Preliminary methods:*\n\nOur methods will be within R, as for analysis we will be focusing on comparing different models that show ozone over time.\nAt the moment we have everything needed to carry out this analysis, but will need to start narrowing down which policies we will be focusing on and where we will get our data from.\nA potential challenge we could face is if the data is if the EPA does not have data that is as focused on our area as we want; if our data is not detailed enough, then we could potentially struggle to get accurate results.\nHowever, if this is the case then we could get supplemental data from the Colorado Department of Public Health and Environment as they have some air quality datasets available.\nThese datasets have information for specific places which make them useful for our project, but they don't have ozone data over time which makes them harder to work with.\n\n*Methods*\n\n**2.1 Study Design**\n\nThis study utilizes a mixed-methods design, incorporating quantitative data to assess the relationship between local policy interventions and ground-level ozone concentrations in Fort Collins, Colorado.\nThe primary objective is to evaluate whether transportation-related policies aimed at reducing vehicle emissions have led to measurable changes in ambient ozone levels over time.\n\n**2.2 Study Area and Control Selection**\n\nThe primary study area is Larimer, Colorado.\nAs a control, we selected Boulder, Colorado—a nearby city with different policies surrounding ozone in the atmosphere.\nThe assumption underlying this choice is that differences in ozone trends between the two cities can be attributed, at least in part, to differing policy regimes.\n\n**2.3 Ozone and Meteorological Data Collection**\n\nAmbient ozone concentration data will be collected from the EPA’s Air Quality System (AQS) database and local monitoring stations operated by the Colorado Department of Public Health and Environment (CDPHE).\nData will be collected over a multi-year time frame, spanning at least 10 years to ensure sufficient pre- and post-policy data points.\n\n**2.4 Policy Timeline Development**\n\nA detailed timeline of policy enactments in Fort Collins will be developed through a review of city council records, transportation master plans, and local sustainability reports.\nEach policy will be categorized by type (e.g., infrastructure investment, public transit expansion, emission regulation) and date of implementation.\nBoulder’s policy timeline will also be reviewed to ensure that it did not implement similar policies during the study period.\n\n**2.5 Data Analysis**\n\n**2.5.1 Time-Series Analysis**\n\nWe will conduct a time-series analysis to examine trends in ozone concentrations over time in both Larimer and Boulder county.\nData will be aggregated to monthly averages to smooth out short-term fluctuations while preserving seasonal patterns.\n\n**2.5.2 Difference-in-Differences (DiD) Analysis**\n\nTo estimate the causal impact of Larimer’s policies on ozone levels, we will use a difference-in-differences (DiD) statistical model.\nThis method compares the change in ozone concentrations in Larimer before and after policy implementation with the corresponding change in Boulder over the same period.\nThe basic DiD model is as follows:\n\nYit​=α+β1​Postt​+β2​Treatmenti​+β3​(Postt​×Treatmenti​)+γXit​+ϵit​\n\nWhere:\n\nYit​ = ozone level in city iii at time ttt\n\nPostt​ = indicator for post-policy period\n\nTreatmenti​ = indicator for Fort Collins (treatment group)\n\nXit​ = vector of control variables (e.g., temperature, wind)\n\nβ3​ = estimated treatment effect\n\n*Results*\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n#Set up data\n#Load data\ndata_2003 <- readr::read_csv(\"/Users/mirandachin/ESS330/lab07/data/ozone_fc_03_21/ad_viz_plotval_data.csv\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 1005 Columns: 21\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (12): Date, Source, Site ID, Units, Local Site Name, AQS Parameter Descr...\ndbl  (9): POC, Daily Max 8-hour Ozone Concentration, Daily AQI Value, Daily ...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\ndata_2004 <- readr::read_csv(\"/Users/mirandachin/ESS330/lab07/data/ozone_fc_03_21/ad_viz_plotval_data(1).csv\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 1004 Columns: 21\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (12): Date, Source, Site ID, Units, Local Site Name, AQS Parameter Descr...\ndbl  (9): POC, Daily Max 8-hour Ozone Concentration, Daily AQI Value, Daily ...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\ndata_2005 <- readr::read_csv(\"/Users/mirandachin/ESS330/lab07/data/ozone_fc_03_21/ad_viz_plotval_data(2).csv\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 1028 Columns: 21\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (12): Date, Source, Site ID, Units, Local Site Name, AQS Parameter Descr...\ndbl  (9): POC, Daily Max 8-hour Ozone Concentration, Daily AQI Value, Daily ...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\ndata_2006 <- readr::read_csv(\"/Users/mirandachin/ESS330/lab07/data/ozone_fc_03_21/ad_viz_plotval_data(3).csv\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 1241 Columns: 21\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (12): Date, Source, Site ID, Units, Local Site Name, AQS Parameter Descr...\ndbl  (9): POC, Daily Max 8-hour Ozone Concentration, Daily AQI Value, Daily ...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\ndata_2007 <- readr::read_csv(\"/Users/mirandachin/ESS330/lab07/data/ozone_fc_03_21/ad_viz_plotval_data(4).csv\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 1366 Columns: 21\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (12): Date, Source, Site ID, Units, Local Site Name, AQS Parameter Descr...\ndbl  (9): POC, Daily Max 8-hour Ozone Concentration, Daily AQI Value, Daily ...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\ndata_2008 <- readr::read_csv(\"/Users/mirandachin/ESS330/lab07/data/ozone_fc_03_21/ad_viz_plotval_data(5).csv\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 1409 Columns: 21\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (12): Date, Source, Site ID, Units, Local Site Name, AQS Parameter Descr...\ndbl  (9): POC, Daily Max 8-hour Ozone Concentration, Daily AQI Value, Daily ...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\ndata_2009 <- readr::read_csv(\"/Users/mirandachin/ESS330/lab07/data/ozone_fc_03_21/ad_viz_plotval_data(6).csv\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 1640 Columns: 21\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (12): Date, Source, Site ID, Units, Local Site Name, AQS Parameter Descr...\ndbl  (9): POC, Daily Max 8-hour Ozone Concentration, Daily AQI Value, Daily ...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\ndata_2010 <- readr::read_csv(\"/Users/mirandachin/ESS330/lab07/data/ozone_fc_03_21/ad_viz_plotval_data(7).csv\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 1727 Columns: 21\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (12): Date, Source, Site ID, Units, Local Site Name, AQS Parameter Descr...\ndbl  (9): POC, Daily Max 8-hour Ozone Concentration, Daily AQI Value, Daily ...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\ndata_2011 <- readr::read_csv(\"/Users/mirandachin/ESS330/lab07/data/ozone_fc_03_21/ad_viz_plotval_data(8).csv\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 1687 Columns: 21\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (12): Date, Source, Site ID, Units, Local Site Name, AQS Parameter Descr...\ndbl  (9): POC, Daily Max 8-hour Ozone Concentration, Daily AQI Value, Daily ...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\ndata_2012 <- readr::read_csv(\"/Users/mirandachin/ESS330/lab07/data/ozone_fc_03_21/ad_viz_plotval_data(9).csv\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 1729 Columns: 21\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (12): Date, Source, Site ID, Units, Local Site Name, AQS Parameter Descr...\ndbl  (9): POC, Daily Max 8-hour Ozone Concentration, Daily AQI Value, Daily ...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\ndata_2013 <- readr::read_csv(\"/Users/mirandachin/ESS330/lab07/data/ozone_fc_03_21/ad_viz_plotval_data(10).csv\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 1605 Columns: 21\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (12): Date, Source, Site ID, Units, Local Site Name, AQS Parameter Descr...\ndbl  (9): POC, Daily Max 8-hour Ozone Concentration, Daily AQI Value, Daily ...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\ndata_2014 <- readr::read_csv(\"/Users/mirandachin/ESS330/lab07/data/ozone_fc_03_21/ad_viz_plotval_data(11).csv\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 1390 Columns: 21\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (12): Date, Source, Site ID, Units, Local Site Name, AQS Parameter Descr...\ndbl  (9): POC, Daily Max 8-hour Ozone Concentration, Daily AQI Value, Daily ...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\ndata_2015 <- readr::read_csv(\"/Users/mirandachin/ESS330/lab07/data/ozone_fc_03_21/ad_viz_plotval_data(12).csv\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 1479 Columns: 21\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (12): Date, Source, Site ID, Units, Local Site Name, AQS Parameter Descr...\ndbl  (9): POC, Daily Max 8-hour Ozone Concentration, Daily AQI Value, Daily ...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\ndata_2016 <- readr::read_csv(\"/Users/mirandachin/ESS330/lab07/data/ozone_fc_03_21/ad_viz_plotval_data(13).csv\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 1546 Columns: 21\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (12): Date, Source, Site ID, Units, Local Site Name, AQS Parameter Descr...\ndbl  (9): POC, Daily Max 8-hour Ozone Concentration, Daily AQI Value, Daily ...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\ndata_2017 <- readr::read_csv(\"/Users/mirandachin/ESS330/lab07/data/ozone_fc_03_21/ad_viz_plotval_data(14).csv\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 1449 Columns: 21\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (12): Date, Source, Site ID, Units, Local Site Name, AQS Parameter Descr...\ndbl  (9): POC, Daily Max 8-hour Ozone Concentration, Daily AQI Value, Daily ...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\ndata_2018 <- readr::read_csv(\"/Users/mirandachin/ESS330/lab07/data/ozone_fc_03_21/ad_viz_plotval_data(15).csv\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 1516 Columns: 21\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (12): Date, Source, Site ID, Units, Local Site Name, AQS Parameter Descr...\ndbl  (9): POC, Daily Max 8-hour Ozone Concentration, Daily AQI Value, Daily ...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\ndata_2019 <- readr::read_csv(\"/Users/mirandachin/ESS330/lab07/data/ozone_fc_03_21/ad_viz_plotval_data(16).csv\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 1406 Columns: 21\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (12): Date, Source, Site ID, Units, Local Site Name, AQS Parameter Descr...\ndbl  (9): POC, Daily Max 8-hour Ozone Concentration, Daily AQI Value, Daily ...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\ndata_2020 <- readr::read_csv(\"/Users/mirandachin/ESS330/lab07/data/ozone_fc_03_21/ad_viz_plotval_data(17).csv\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 1539 Columns: 21\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (12): Date, Source, Site ID, Units, Local Site Name, AQS Parameter Descr...\ndbl  (9): POC, Daily Max 8-hour Ozone Concentration, Daily AQI Value, Daily ...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\ndata_2021 <- readr::read_csv(\"/Users/mirandachin/ESS330/lab07/data/ozone_fc_03_21/ad_viz_plotval_data(18).csv\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 1534 Columns: 21\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (12): Date, Source, Site ID, Units, Local Site Name, AQS Parameter Descr...\ndbl  (9): POC, Daily Max 8-hour Ozone Concentration, Daily AQI Value, Daily ...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\ntotal_data <- rbind(data_2003, data_2004, data_2005, data_2006, data_2007, \n                    data_2008, data_2009, data_2010, data_2011, data_2012, \n                    data_2013, data_2014, data_2015, data_2016, data_2017,\n                    data_2018, data_2019, data_2020, data_2021)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n#Time series analysis\nlibrary(lubridate)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n\nAttaching package: 'lubridate'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nThe following objects are masked from 'package:base':\n\n    date, intersect, setdiff, union\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\ntotal_data$Date <- as.Date(total_data$Date, format = \"%m/%d/%Y\")\ntotal_data$Year <- year(total_data$Date)\n\ntotal_data %>%\n  select(Date) %>%\n  distinct() %>%\n  slice_head(n = 10)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 10 × 1\n   Date      \n   <date>    \n 1 2003-01-01\n 2 2003-01-02\n 3 2003-01-03\n 4 2003-01-04\n 5 2003-01-05\n 6 2003-01-06\n 7 2003-01-08\n 8 2003-01-09\n 9 2003-01-10\n10 2003-01-11\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nozone_fc <- total_data %>%\n  mutate(month = floor_date(Date, \"month\")) %>%\n  group_by(month) %>%\n  summarize(mean_ozone = mean(`Daily AQI Value`, na.rm = TRUE))\nozone_ts <- ts(ozone_fc$mean_ozone,\n               start = c(year(min(ozone_fc$month)), month(min(ozone_fc$month))),\n               frequency = 12)\nlibrary(forecast)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRegistered S3 method overwritten by 'quantmod':\n  method            from\n  as.zoo.data.frame zoo \n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nautoplot(ozone_ts) +\n  labs(title = \"Monthly Ozone in Fort Collins\", y = \"Ozone (ppb)\", x = \"Year\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n#Difference-in-Differences (DiD) Analysis\nfull_data_2003 <- readr::read_csv(\"/Users/mirandachin/ESS330/lab07/data/daily_44201_2003.csv\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 351848 Columns: 29\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (17): State Code, County Code, Site Num, Datum, Parameter Name, Sample ...\ndbl  (10): Parameter Code, POC, Latitude, Longitude, Observation Count, Obse...\ndate  (2): Date Local, Date of Last Change\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nfull_data_2021 <- readr::read_csv(\"/Users/mirandachin/ESS330/lab07/data/daily_44201_2021.csv\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 394349 Columns: 29\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (17): State Code, County Code, Site Num, Datum, Parameter Name, Sample ...\ndbl  (10): Parameter Code, POC, Latitude, Longitude, Observation Count, Obse...\ndate  (2): Date Local, Date of Last Change\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nboulder_2003 <- full_data_2003 %>% \n  filter(`County Name` == \"Boulder\")\n\nboulder_2021 <- full_data_2021 %>% \n  filter(`County Name` == \"Boulder\")\n\nlarimer_2003 <- full_data_2003 %>% \n  filter(`County Name` == \"Larimer\")\n\nlarimer_2021 <- full_data_2021 %>% \n  filter(`County Name` == \"Larimer\")\n\ndid_data <- rbind(boulder_2003, boulder_2021, larimer_2003, larimer_2021) %>% \n  mutate(`Date Local` = as.Date(`Date Local`),\n         Year = year(`Date Local`),\n         Month = month(`Date Local`))\n\n#Aggregated to year\ndid_yearly_data <- did_data %>%\n  group_by(`County Name`, Year) %>%\n  summarise(AQI = mean(AQI, na.rm = TRUE)) %>%\n  ungroup()\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n`summarise()` has grouped output by 'County Name'. You can override using the\n`.groups` argument.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\ndid_yearly_data <- did_yearly_data %>%\n  mutate(\n    Treated = ifelse(`County Name` == \"Larimer\", 1, 0),\n    Post = ifelse(Year == 2021, 1, 0),\n    Interaction = Treated * Post)\n\nprint(did_yearly_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 4 × 6\n  `County Name`  Year   AQI Treated  Post Interaction\n  <chr>         <dbl> <dbl>   <dbl> <dbl>       <dbl>\n1 Boulder        2003  45.9       0     0           0\n2 Boulder        2021  54.2       0     1           0\n3 Larimer        2003  50.0       1     0           0\n4 Larimer        2021  54.1       1     1           1\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\ndid_model <- lm(AQI ~ Treated + Post + Interaction, data = did_yearly_data)\nsummary(did_model)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nlm(formula = AQI ~ Treated + Post + Interaction, data = did_yearly_data)\n\nResiduals:\nALL 4 residuals are 0: no residual degrees of freedom!\n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)\n(Intercept)   45.912        NaN     NaN      NaN\nTreated        4.038        NaN     NaN      NaN\nPost           8.270        NaN     NaN      NaN\nInteraction   -4.093        NaN     NaN      NaN\n\nResidual standard error: NaN on 0 degrees of freedom\nMultiple R-squared:      1,\tAdjusted R-squared:    NaN \nF-statistic:   NaN on 3 and 0 DF,  p-value: NA\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\n#Aggregated to month\ndid_monthly_data <- did_data %>%\n  group_by(`County Name`, Year, Month) %>%\n  summarise(AQI = mean(AQI, na.rm = TRUE)) %>%\n  ungroup()\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n`summarise()` has grouped output by 'County Name', 'Year'. You can override\nusing the `.groups` argument.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\ndid_monthly_data <- did_monthly_data %>%\n  mutate(\n    Treated = ifelse(`County Name` == \"Larimer\", 1, 0),\n    Post = ifelse(Year == 2021, 1, 0),\n    Interaction = Treated * Post)\n\ndid_monthly_model <- lm(AQI ~ Treated + Post + Interaction, data = did_monthly_data)\nsummary(did_monthly_model)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nlm(formula = AQI ~ Treated + Post + Interaction, data = did_monthly_data)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-22.205 -16.172  -6.199  13.665  46.780 \n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)    \n(Intercept)   45.672      5.651   8.082 3.07e-10 ***\nTreated        4.790      7.992   0.599    0.552    \nPost           8.371      7.992   1.048    0.301    \nInteraction   -6.254     11.302  -0.553    0.583    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 19.58 on 44 degrees of freedom\nMultiple R-squared:  0.02771,\tAdjusted R-squared:  -0.03858 \nF-statistic: 0.418 on 3 and 44 DF,  p-value: 0.7409\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\n#Data visualization\navg_trend <- did_monthly_data %>%\n  group_by(Month, Year, Treated) %>%\n  summarise(mean_AQI = mean(AQI, na.rm = TRUE)) %>%\n  mutate(\n    Time = as.Date(paste(Year, Month, \"01\", sep = \"-\")))\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n`summarise()` has grouped output by 'Month', 'Year'. You can override using the\n`.groups` argument.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nggplot(avg_trend, aes(x = Time, y = mean_AQI, color = factor(Treated))) +\n  geom_line(size = 1.2) +\n  geom_vline(xintercept = as.Date(\"2021-01-01\"), linetype = \"dashed\", color = \"black\") +\n  labs(\n    title = \"DID Model with AQI Over Time\",\n    x = \"Time\",\n    y = \"Monthly Average AQI\",\n    color = \"Treated\") +\n  theme_minimal()\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\nℹ Please use `linewidth` instead.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n\n\n\nIn the DiD monthly model, Boulder's ozone AQI went up by 8.4 units while Larimer's ozone was smaller by 6.3 units, indicating that Larimer had a smaller increase in ozone.\nHowever, the p-value is 0.741, which is not scientifically significant; this means that the model cannot explain variations in the data and these differences could be from random error.\n\n*Discussion*\n\nLooking at the Difference-in-Differences (DiD) model, the trends between Larimer and Boulder are very similar.\nHowever, the actual model itself resulted in a p-value above 0.05, indicating that the model did not yield statistically significant results and cannot explain the data accurately.\nThis implicates that although these policies have had a positive impact on air quality in Larimer County, we still cannot say for sure if policy is the sole reason for improvement.\nLooking at the monthly AQI of Larimer in the time series visualization, it implies that ozone AQI has continued to experience fluctuations both with and without new policy.\n\nThe limitations of this analysis include that there could be other variables that are not being considered in the model, such as wildfires, the pandemic, and other changes.\nAdditionally, comparing Larimer County to Boulder County might require more research into what policies exist in Boulder and if they have similar effects to the ones implemented in Larimer over the past years.\n\nThese results relate to the broader field of science by displaying how models can be used to find patterns and trends in data over decades of time.\nIt also connects to the need for accurate data and models in order to make decisions about environmental policies and changes on a local scale.\nFor the future, similar projects can work to include other variables beyond policy changes, as well as dive deeper into differences depending on if data is collected on a different scale than county, such as by local communities, state, or other.\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}